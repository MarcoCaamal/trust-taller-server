### Variables
@baseUrl = http://localhost:3001
@apiUrl = {{baseUrl}}/api

### Register Workshop - Success
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Mi Mecánico",
  "slug": "mi-mecanico",
  "email": "contacto@mi-mecanico.com",
  "user": {
    "email": "admin@example.com",
    "name": "Juan",
    "lastName": "Pérez",
    "password": "password123"
  }
}

### Register Workshop - Another Workshop
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "AutoService Pro",
  "slug": "autoservice-pro",
  "email": "contacto@autoservice.com",
  "user": {
    "email": "owner@autoservice.com",
    "name": "María",
    "lastName": "González",
    "password": "securepass456"
  }
}

### Register Workshop - Duplicate Slug (should fail)
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Otro Taller",
  "slug": "mi-mecanico",
  "email": "otro@taller.com",
  "user": {
    "email": "otro@example.com",
    "name": "Pedro",
    "lastName": "Martínez",
    "password": "password789"
  }
}

### Register Workshop - Duplicate Email in same tenant (should fail)
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Nuevo",
  "slug": "taller-nuevo",
  "email": "contacto@mi-mecanico.com",
  "user": {
    "email": "admin@example.com",
    "name": "Carlos",
    "lastName": "López",
    "password": "password999"
  }
}

### Register Workshop - Validation Error: Invalid email
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Test",
  "slug": "taller-test",
  "email": "contacto@taller-test.com",
  "user": {
    "email": "invalid-email",
    "name": "Test",
    "lastName": "User",
    "password": "password123"
  }
}

### Register Workshop - Validation Error: Short password
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Test",
  "slug": "taller-test",
  "email": "contacto@taller-test.com",
  "user": {
    "email": "test@example.com",
    "name": "Test",
    "lastName": "User",
    "password": "12345"
  }
}

### Register Workshop - Validation Error: Invalid slug format
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Test",
  "slug": "Taller Test!",
  "email": "contacto@taller-test.com",
  "user": {
    "email": "test@example.com",
    "name": "Test",
    "lastName": "User",
    "password": "password123"
  }
}

### Register Workshop - Validation Error: Missing fields
POST {{apiUrl}}/auth/register
Content-Type: application/json

{
  "name": "Taller Test",
  "slug": "taller-test",
  "email": "contacto@taller-test.com"
}

### Problem Details - Validation Error (example response)
# HTTP/1.1 400 Bad Request
# Content-Type: application/problem+json
#
# {
#   "type": "https://trust-taller.dev/problems/validation-error",
#   "title": "Bad Request",
#   "status": 400,
#   "detail": "Validation error",
#   "instance": "/api/auth/register",
#   "errors": [
#     { "path": "user", "message": "Required" }
#   ]
# }

### Login
POST {{apiUrl}}/auth/login
Content-Type: application/json
X-Forwarded-Host: mi-mecanico.trust-taller.local

{
  "email": "admin@example.com",
  "password": "password123"
}

### Problem Details - Invalid credentials (example response)
# HTTP/1.1 401 Unauthorized
# Content-Type: application/problem+json
#
# {
#   "type": "https://docs.trust-taller.com/errors/unauthorized",
#   "title": "Unauthorized",
#   "status": 401,
#   "detail": "Invalid credentials",
#   "instance": "/api/auth/login"
# }
